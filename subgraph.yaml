specVersion: 0.0.5
description: Subgraph for the Kōyō Finance exchange on the Boba mainnet.
repository: https://github.com/koyo-finance/exchange-subgraph
schema:
  file: ./schema.graphql
dataSources:
  - name: Vault
    kind: ethereum/contract
    network: boba
    source:
      address: "0x2A4409Cc7d2AE7ca1E3D915337D1B6Ba2350D6a3"
      abi: Vault
      startBlock: 668337
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/vault/core.ts
      entities:
        - Account
        - AccountInternalBalance
      abis:
        - name: Vault
          file: ./abis/Vault.abi
        - name: ERC20
          file: ./abis/ERC20.abi
        - name: OracleWeightedPoolFactory
          file: ./abis/OracleWeightedPoolFactory.abi
        - name: OracleWeightedPool
          file: ./abis/OracleWeightedPool.abi
      eventHandlers:
        - event: Swap(indexed bytes32,indexed address,indexed address,uint256,uint256)
          handler: handleSwapEvent
        - event: PoolBalanceChanged(indexed bytes32,indexed
            address,address[],int256[],uint256[])
          handler: handleBalanceChange
        - event: InternalBalanceChanged(indexed address,indexed address,int256)
          handler: handleInternalBalanceChange
  - name: GaugeController
    kind: ethereum/contract
    network: boba
    source:
      abi: GaugeController
      address: "0xe8c8dbCcE7450B1100A5e416525B2F6C5F7eaDba"
      startBlock: 653581
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/gauges/controller.ts
      abis:
        - name: GaugeController
          file: ./abis/GaugeController.abi
        - name: Gauge
          file: ./abis/Gauge.abi
        - name: ERC20
          file: ./abis/ERC20.abi
      entities:
        - Gauge
        - GaugeType
        - GaugeWeight
        - GaugeWeightVote
      eventHandlers:
        - event: AddType(string,int128)
          handler: handleAddType
        - event: NewGauge(address,int128,uint256)
          handler: handleNewGauge
        - event: NewGaugeWeight(address,uint256,uint256,uint256)
          handler: handleNewGaugeWeight
        - event: NewTypeWeight(int128,uint256,uint256,uint256)
          handler: handleNewTypeWeight
        - event: VoteForGauge(uint256,address,address,uint256)
          handler: handleVoteForGauge
  - name: OracleWeightedPoolFactory
    kind: ethereum/contract
    network: boba
    source:
      address: "0x06f607EC266BB98bcb9Bae402D61Ab5E008ab018"
      abi: OracleWeightedPoolFactory
      startBlock: 673576
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/vault/pools/oracleWeightedFactory.ts
      entities:
        - Pool
      abis:
        - name: Vault
          file: ./abis/Vault.abi
        - name: ERC20
          file: ./abis/ERC20.abi
        - name: OracleWeightedPoolFactory
          file: ./abis/OracleWeightedPoolFactory.abi
        - name: OracleWeightedPool
          file: ./abis/OracleWeightedPool.abi
      eventHandlers:
        - event: PoolCreated(indexed address)
          handler: handleNewOracleWeightedPool
templates:
  - name: Gauge
    kind: ethereum/contract
    network: boba
    source:
      abi: Gauge
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/gauges/gauge.ts
      entities: []
      abis:
        - name: Gauge
          file: ./abis/Gauge.abi
      eventHandlers:
        - event: Deposit(indexed address,uint256)
          handler: handleDeposit
        - event: UpdateLiquidityLimit(address,uint256,uint256,uint256,uint256)
          handler: handleUpdateLiquidityLimit
        - event: Withdraw(indexed address,uint256)
          handler: handleWithdraw
